# =============================================================================
# Scandium - Production-Grade Precision Landing System
# mypy Static Type Checker Configuration
# =============================================================================
# mypy is a static type checker for Python.
# Reference: https://mypy.readthedocs.io/en/stable/config_file.html
# =============================================================================

# -----------------------------------------------------------------------------
# Global Configuration
# -----------------------------------------------------------------------------

[mypy]
# Python version target
python_version = 3.11

# Paths to check
files = src/scandium

# Enable strict mode (equivalent to enabling all strict flags)
strict = true

# Additional strict options (explicit for documentation)
warn_return_any = true
warn_unused_configs = true
warn_redundant_casts = true
warn_unused_ignores = true
disallow_untyped_defs = true
disallow_incomplete_defs = true
check_untyped_defs = true
disallow_untyped_decorators = true
no_implicit_optional = true
strict_optional = true
strict_equality = true

# Error message formatting
pretty = true
show_error_codes = true
show_error_context = true
show_column_numbers = true
error_summary = true

# Miscellaneous strictness options
warn_unreachable = true
no_implicit_reexport = true
enable_error_code = dmypy-hierarchal, truthy-bool, redundant-expr

# Namespace packages support
namespace_packages = true
explicit_package_bases = true

# Incremental mode for performance
incremental = true
cache_dir = .mypy_cache

# Plugins (if needed)
plugins = pydantic.mypy

# -----------------------------------------------------------------------------
# Per-Module Configuration
# -----------------------------------------------------------------------------

# Third-party libraries without type stubs
[mypy-cv2.*]
ignore_missing_imports = true

[mypy-pymavlink.*]
ignore_missing_imports = true

[mypy-airsim.*]
ignore_missing_imports = true

[mypy-scipy.*]
ignore_missing_imports = true

[mypy-hypothesis.*]
ignore_missing_imports = true

# Test files can have slightly relaxed typing
[mypy-tests.*]
disallow_untyped_defs = false
disallow_incomplete_defs = false
disallow_untyped_decorators = false

# Scripts can have relaxed typing
[mypy-scripts.*]
disallow_untyped_defs = false
ignore_missing_imports = true

# -----------------------------------------------------------------------------
# Pydantic Plugin Configuration
# -----------------------------------------------------------------------------

[pydantic-mypy]
# Initialize forbid extra fields
init_forbid_extra = true

# Initialize typed (required for strict mode)
init_typed = true

# Warn about required dynamic aliases
warn_required_dynamic_aliases = true

# Warn about untyped fields
warn_untyped_fields = true
